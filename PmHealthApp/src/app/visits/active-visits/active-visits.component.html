<nav class="navbar navbar-inverse" style="margin: 10px 15% 0;">
  <div class="container-fluid">
    <div class="navbar-header">
      <a class="navbar-brand" href="#"><strong>PM Health</strong></a>
    </div>

    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-2">
      <ul class="nav navbar-nav navbar-right">
        <li><a href="#"><strong>Logout</strong></a></li>
      </ul>
    </div>
  </div>
</nav>
<ol class="breadcrumb" style="margin: 0 15%; border-radius: 0">
  <li class="breadcrumb-item"><a href="../dashboard">Dashboard</a></li>
  <li class="breadcrumb-item active">Start Visit</li>
</ol>
<div class="page" style="margin-left: 15%; margin-right: 15%; padding: 10px 25px; overflow: hidden">
  <div style="height: 250px; overflow: auto">
    <!--<label for="search">Search</label>
    <input id="search" class="form-control" type="text">-->
    <h3>Select a Patient</h3>
    <table class="table table-striped table-hover">
      <thead>
      <tr>
        <th>Patient ID</th>
        <th>Admission Date</th>
        <th>Reason</th>
      </tr>
      </thead>
      <tbody>
      <tr *ngFor="let visit of visits"
          style="cursor: pointer;"
          (click)="setVisit(visit)">
        <td>{{ visit.patientId }}</td>
        <td>{{ visit.admissionDate }}</td>
        <td>{{ visit.reason }}</td>
      </tr>
      </tbody>
    </table>
  </div>
  <div *ngIf="visit">
    <form (submit)="endVisit()" id="visitForm">
      <!--<small class="form-text">Admission Date</small><br>
      {{visit.admissionDate}}<br>

      <small class="form-text">Reason</small><br>
      <textarea class="form-control" name="reason" form="visitForm" rows="5" style="margin-bottom: 10px" [(ngModel)]="visit.reason"></textarea>
      <div class="">
        <button type="submit" class="btn btn-primary">End Visit</button>
      </div>-->
      <div *ngIf="visit" class="rec-comp" id="visits-div" style="overflow: hidden; margin: 0; text-align: left">
        <h5 class="comp-header" style="margin: 0; padding: 5px; text-align: center"><strong>Visit</strong></h5>
        <div style="padding: 20px; overflow: hidden" *ngIf="visit.visitId != null">
          <form (submit)="updateVisit()">
            <div class="row" style="margin-bottom: 10px">
              <div class="col-lg-3">
                <small class="form-text">Admission Date</small><br>
                <input type="text" name="admissionDate" class="form-control" [(ngModel)]="visit.admissionDate" disabled/>
              </div>
              <div class="col-lg-3">
                <small class="form-text">Discharge Date</small><br>
                <input type="text" name="dischargeDate" class="form-control" [(ngModel)]="visit.dischargeDate" disabled/>
              </div>
              <div class="col-lg-6">
                <small class="form-text">Reason</small><br>
                <input type="text" name="reason" class="form-control" [(ngModel)]="visit.reason"/>
              </div>
            </div>
            <div class="row" style="margin-bottom: 10px">
              <div class="col-lg-2">
                <small class="form-text">Height</small><br>
                <input type="text" name="height" class="form-control" [(ngModel)]="visit.vitals.height"/>
              </div>
              <div class="col-lg-2">
                <small class="form-text">Weight</small><br>
                <input type="text" name="weight" class="form-control" [(ngModel)]="visit.vitals.weight"/>
              </div>
              <div class="col-lg-2">
                <small class="form-text">Temperature</small><br>
                <input type="text" name="temperature" class="form-control" [(ngModel)]="visit.vitals.temperature"/>
              </div>
              <div class="col-lg-2">
                <small class="form-text">Pulse</small><br>
                <input type="text" name="pulse" class="form-control" [(ngModel)]="visit.vitals.pulse"/>
              </div>
              <div class="col-lg-2">
                <small class="form-text">Blood Pressure</small><br>
                <input type="text" name="bloodPresssure" class="form-control" [(ngModel)]="visit.vitals.bloodPressure"/>
              </div>
            </div>

            <div class="row" style="margin-bottom: 10px">
              <div class="col-lg-6">
                <small class="form-text">Diagnoses</small><br>
                <textarea style="box-sizing: border-box" name="diagnoses" [(ngModel)]="visit.diagnoses"></textarea>
              </div>
              <div class="col-lg-6">
                <small class="form-text">Treatments</small><br>
                <textarea style="box-sizing: border-box" name="treatments" [(ngModel)]="visit.treatments"></textarea>
              </div>
            </div>

            <div class="fluid-container" style="margin-bottom: 10px">
              <small class="form-text">Notes</small><br>
              <textarea>{{visit.notes}}</textarea>
            </div>

            <div class="form-group">
              <div class="col-lg-12" style="text-align: center">
                <button type="submit" class="btn btn-primary">Update</button>
                <button type="submit" class="btn btn-primary" style="background-color: #F04124" (click)="endVisit()">End Visit</button>
              </div>
            </div>
          </form>
        </div>
      </div>
    </form>
  </div>
</div>

